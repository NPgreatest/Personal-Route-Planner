(function(){"use strict";var e={3739:function(e,t,l){var a=l(9242),o=l(3396);const i={class:"full"},n=(0,o._)("h3",null,"知识库构建",-1),s=(0,o._)("h3",null,"应用构建",-1);function r(e,t){const l=(0,o.up)("el-col"),a=(0,o.up)("router-link"),r=(0,o.up)("el-row"),d=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("nav",null,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{span:10}),(0,o.Wm)(l,{span:2},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{to:"/"},{default:(0,o.w5)((()=>[n])),_:1})])),_:1}),(0,o.Wm)(l,{span:2},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{to:"/about"},{default:(0,o.w5)((()=>[s])),_:1})])),_:1}),(0,o.Wm)(l,{span:10})])),_:1})]),(0,o.Wm)(d)])}var d=l(89);const p={},c=(0,d.Z)(p,[["render",r]]);var m=c,u=l(7837),h=l(2483);const g={class:"home"};function f(e,t,l,a,i,n){const s=(0,o.up)("KnowledgeBase");return(0,o.wg)(),(0,o.iD)("div",g,[(0,o.Wm)(s)])}var w=l(7139);const _=e=>((0,o.dD)("data-v-40c35624"),e=e(),(0,o.Cn)(),e),x=_((()=>(0,o._)("div",{style:{color:"#188ffd","text-align":"left","font-size":"24px","font-weight":"bold"}}," 知识库构建 ",-1))),b=_((()=>(0,o._)("div",{style:{"text-align":"left",color:"#808080","font-size":"12px","font-weight":"bold","margin-top":"4px"}},[(0,o.Uk)(" 在这里您可以创建和管理自己的知识库，通过关联知识库，大模型能够提供更加专业、精准的回答。"),(0,o._)("br"),(0,o.Uk)(" 快来创建你的专属知识库吧，让大模型成为特定场景的业务专家！ ")],-1))),y={class:"card-icon",style:{color:"#0c89fd","font-size":"70px"}},k=_((()=>(0,o._)("div",{style:{"text-align":"left","font-size":"18px","font-weight":"bold","margin-top":"20px"}},"知识库信息",-1))),v=_((()=>(0,o._)("div",{style:{"text-align":"left",color:"#808080","font-size":"12px","font-weight":"bold","margin-top":"4px"}}," 请输入知识库基本信息 ",-1))),W={class:"card-icon",style:{color:"#0c89fd","font-size":"70px"}},A=_((()=>(0,o._)("div",{style:{"text-align":"left","font-size":"18px","font-weight":"bold","margin-top":"20px"}},"文档配置",-1))),C=_((()=>(0,o._)("div",{style:{"text-align":"left",color:"#808080","font-size":"12px","font-weight":"bold","margin-top":"4px"}}," 上传知识文档，设置分段方案 ",-1))),V={class:"knowledge-Create-head"},P=_((()=>(0,o._)("h2",{style:{"text-align":"left"}},"知识库列表",-1))),U={style:{display:"flex","justify-content":"center","align-items":"center"},class:"search-container2"},S=_((()=>(0,o._)("i",{class:"search-icon2"},"🔍",-1))),D=_((()=>(0,o._)("ul",{id:"searchkbResults"},null,-1))),T={class:"create-card"},z={class:"card-icon",style:{cursor:"pointer"}},L={class:"card-createknowledgebase",style:{cursor:"pointer","justify-content":"center",width:"100%"}},K=_((()=>(0,o._)("div",{class:"create-card-description",style:{"text-align":"center"}}," 快来创建你的知识库吧！ ",-1))),$={class:"knowledge-card"},E={class:"card-head-row"},F={class:"card-name"},j={style:{"margin-right":"10px"}},q={class:"card-dropdown"},B=_((()=>(0,o._)("span",{class:"el-dropdown-link",style:{"font-size":"25px"}}," ··· ",-1))),O={class:"card-description"},H={class:"crad-hail-row"},M={class:"card-files",style:{"justify-content":"flex-start"}},I={style:{display:"flex","flex-direction":"row"}},R={style:{"margin-right":"10px"}},Q={style:{"margin-right":"10px"}},Y={style:{"margin-right":"10px"}},Z={class:"table",style:{height:"110px","margin-bottom":"10px"}},N={style:{display:"flex","flex-direction":"row"}},G={style:{display:"flex","flex-direction":"column",width:"740px"}},J={style:{display:"flex"}},X={style:{"font-size":"20px","font-weight":"bold"}},ee={style:{display:"flex","margin-top":"6px"}},te=_((()=>(0,o._)("div",{style:{display:"flex","flex-direction":"row","margin-top":"6px"}},[(0,o._)("div",{style:{"margin-right":"20px"}},"模型：OpenAi Embedding"),(0,o._)("div",null,"更新时间：2024-3-22")],-1))),le={class:"table"},ae={style:{display:"flex","flex-direction":"row","margin-bottom":"10px","margin-left":"15px","margin-right":"15px","justify-content":"space-between"}},oe=_((()=>(0,o._)("div",null,"文件列表",-1))),ie=_((()=>(0,o._)("ul",{id:"searchfileResults"},null,-1))),ne={style:{color:"white",background:"linear-gradient(rgb(79, 171, 255),rgb(255,255,255))","border-radius":"20px",height:"320px","padding-top":"1px",margin:"10px 30px 10px 30px"}},se=_((()=>(0,o._)("h3",{style:{"text-align":"left",margin:"15px 15px 20px 15px",height:"20px"}},"帮助小助手",-1))),re={key:0,style:{"background-color":"#e8f1fd","border-radius":"20px",padding:"15px",margin:"0px",height:"calc(100% - 85px)","text-align":"left"}},de=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"文档上传",-1))),pe=_((()=>(0,o._)("p",{style:{color:"black"}},"单个文档最大支持100M。注意关于文档内容，请尊重和维护公共道德和社会公序，文件中禁止含有违反工序良俗的内容。",-1))),ce=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"为什么进行文本分段？",-1))),me=_((()=>(0,o._)("p",{style:{color:"black"}},"当用户提问时，通过计算问题与文本块的相似度,能够快速找到与问题最匹配的文本段落，让大模型给到更准确且专业的回答。",-1))),ue=[de,pe,ce,me],he={key:1,style:{"background-color":"#e8f1fd","border-radius":"20px",padding:"15px",margin:"0px",height:"calc(100% - 85px)","text-align":"left"}},ge=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"文本分段规则：",-1))),fe=_((()=>(0,o._)("p",{style:{color:"black"}},"您可为上传的文档选择合适的分段规则及分段最大长度。注意:不同的分段策略也会对最终知识匹配结果产生影响。",-1))),we=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"注意事项：",-1))),_e=_((()=>(0,o._)("p",{style:{color:"black"}},"当前平台仅提供通用的分段规则，后续平台升级后会提供更多分段策略供您配置,敬请期待!",-1))),xe=[ge,fe,we,_e],be={class:"upload-file"},ye=_((()=>(0,o._)("div",{style:{display:"flex","flex-direction":"row","margin-bottom":"10px"}},[(0,o._)("div",{style:{color:"rgb(116, 176, 249)","font-weight":"bold","margin-right":"5px"}},"|"),(0,o._)("div",{style:{color:"red","margin-right":"3px","margin-top":"3px"}},"*"),(0,o._)("div",{style:{"text-align":"left","font-weight":"bold"}},"上传文件")],-1))),ke={class:"upload-file-icon",style:{display:"flex","flex-direction":"column","background-color":"rgb(250, 251, 255)",width:"550px"}},ve=_((()=>(0,o._)("em",{style:{color:"rgb(123, 180, 249)"}},"click to upload",-1))),We=_((()=>(0,o._)("div",{class:"el-upload__text",style:{"font-size":"small"}}," 支持文件(WORD/PDF/PPT)上传，单个文档最大支持100M ",-1))),Ae={class:"upload-lcut"},Ce=_((()=>(0,o._)("div",{class:"upload-lcut-head",style:{display:"flex","flex-direction":"row","margin-bottom":"10px","margin-top":"20px"}},[(0,o._)("div",{style:{color:"rgb(116, 176, 249)","font-weight":"bold","margin-right":"5px"}},"|"),(0,o._)("div",{style:{color:"red","margin-right":"3px","margin-top":"3px"}},"*"),(0,o._)("div",{style:{"text-align":"left","font-weight":"bold"}},"文档分段设置"),(0,o._)("div",{style:{"text-align":"left","margin-left":"10px"}},"自定义分段规则、分段长度")],-1))),Ve={class:"dialog-footer"},Pe={class:"currentStep0"},Ue=_((()=>(0,o._)("div",{style:{color:"white",background:"linear-gradient(rgb(79, 171, 255),rgb(255,255,255))","border-radius":"20px",height:"320px","padding-top":"1px",margin:"10px 30px 10px 30px"}},[(0,o._)("h3",{style:{"text-align":"left",margin:"15px 15px 20px 15px",height:"20px"}},"帮助小助手"),(0,o._)("div",{style:{"background-color":"#e8f1fd","border-radius":"20px",padding:"15px",margin:"0px",height:"calc(100% - 85px)","text-align":"left"}},[(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"知识库基本信息"),(0,o._)("p",{style:{color:"black"}},"请输入知识库名称，并在描述里面添加知识库的知识范围、应用场景等"),(0,o._)("p",{style:{color:"black"}},"注意：知识库名称不得重复！")])],-1))),Se=_((()=>(0,o._)("div",{style:{"font-size":"18px","font-weight":"bold",color:"#0c89fd","margin-bottom":"30px"}},"知识库信息",-1))),De={style:{color:"white",background:"linear-gradient(rgb(79, 171, 255),rgb(255,255,255))","border-radius":"20px",height:"320px","padding-top":"1px",margin:"10px 30px 10px 30px"}},Te=_((()=>(0,o._)("h3",{style:{"text-align":"left",margin:"15px 15px 20px 15px",height:"20px"}},"帮助小助手",-1))),ze={key:0,style:{"background-color":"#e8f1fd","border-radius":"20px",padding:"15px",margin:"0px",height:"calc(100% - 85px)","text-align":"left"}},Le=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"文档上传",-1))),Ke=_((()=>(0,o._)("p",{style:{color:"black"}},"单个文档最大支持100M。注意关于文档内容，请尊重和维护公共道德和社会公序，文件中禁止含有违反工序良俗的内容。",-1))),$e=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"为什么进行文本分段？",-1))),Ee=_((()=>(0,o._)("p",{style:{color:"black"}},"当用户提问时，通过计算问题与文本块的相似度,能够快速找到与问题最匹配的文本段落，让大模型给到更准确且专业的回答。",-1))),Fe=[Le,Ke,$e,Ee],je={key:1,style:{"background-color":"#e8f1fd","border-radius":"20px",padding:"15px",margin:"0px",height:"calc(100% - 85px)","text-align":"left"}},qe=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"文本分段规则：",-1))),Be=_((()=>(0,o._)("p",{style:{color:"black"}},"您可为上传的文档选择合适的分段规则及分段最大长度。注意:不同的分段策略也会对最终知识匹配结果产生影响。",-1))),Oe=_((()=>(0,o._)("div",{style:{"margin-bottom":"1px","font-size":"18px","font-weight":"bold",color:"black"}},"注意事项：",-1))),He=_((()=>(0,o._)("p",{style:{color:"black"}},"当前平台仅提供通用的分段规则，后续平台升级后会提供更多分段策略供您配置,敬请期待!",-1))),Me=[qe,Be,Oe,He],Ie={class:"upload-file"},Re=_((()=>(0,o._)("div",{style:{display:"flex","flex-direction":"row","margin-bottom":"10px"}},[(0,o._)("div",{style:{color:"rgb(116, 176, 249)","font-weight":"bold","margin-right":"5px"}},"|"),(0,o._)("div",{style:{color:"red","margin-right":"3px","margin-top":"3px"}},"*"),(0,o._)("div",{style:{"text-align":"left","font-weight":"bold"}},"上传文件")],-1))),Qe={class:"upload-file-icon",style:{display:"flex","flex-direction":"column","background-color":"rgb(250, 251, 255)",width:"550px"}},Ye=_((()=>(0,o._)("em",{style:{color:"rgb(123, 180, 249)"}},"click to upload",-1))),Ze=_((()=>(0,o._)("div",{class:"el-upload__text",style:{"font-size":"small"}}," 支持文件(WORD/PDF/PPT)上传，单个文档最大支持100M ",-1))),Ne={class:"upload-lcut"},Ge=_((()=>(0,o._)("div",{class:"upload-lcut-head",style:{display:"flex","flex-direction":"row","margin-bottom":"10px","margin-top":"20px"}},[(0,o._)("div",{style:{color:"rgb(116, 176, 249)","font-weight":"bold","margin-right":"5px"}},"|"),(0,o._)("div",{style:{color:"red","margin-right":"3px","margin-top":"3px"}},"*"),(0,o._)("div",{style:{"text-align":"left","font-weight":"bold"}},"文档分段设置"),(0,o._)("div",{style:{"text-align":"left","margin-left":"10px"}},"自定义分段规则、分段长度")],-1))),Je={class:"create-success-card-head"},Xe={class:"table",style:{height:"160px","margin-bottom":"10px"}},et={class:"dialog-footer"},tt={class:"create-success-button"},lt={class:"dialog-footer"};function at(e,t,l,i,n,s){const r=(0,o.up)("el-col"),d=(0,o.up)("FolderChecked"),p=(0,o.up)("el-icon"),c=(0,o.up)("School"),m=(0,o.up)("el-row"),u=(0,o.up)("el-card"),h=(0,o.up)("el-input"),g=(0,o.up)("n-divider"),f=(0,o.up)("DocumentAdd"),_=(0,o.up)("el-button"),de=(0,o.up)("el-dropdown-item"),pe=(0,o.up)("el-dropdown-menu"),ce=(0,o.up)("el-dropdown"),me=(0,o.up)("el-avatar"),ge=(0,o.up)("el-pagination"),fe=(0,o.up)("Edit"),we=(0,o.up)("el-table-column"),_e=(0,o.up)("Delete"),Le=(0,o.up)("el-popconfirm"),Ke=(0,o.up)("Download"),$e=(0,o.up)("el-table"),Ee=(0,o.up)("el-dialog"),qe=(0,o.up)("el-aside"),Be=(0,o.up)("UploadFilled"),Oe=(0,o.up)("n-upload"),He=(0,o.up)("el-option"),at=(0,o.up)("el-select"),ot=(0,o.up)("el-form-item"),it=(0,o.up)("el-form"),nt=(0,o.up)("el-main"),st=(0,o.up)("el-container"),rt=(0,o.up)("el-step"),dt=(0,o.up)("el-steps"),pt=(0,o.up)("el-result"),ct=(0,o.up)("el-descriptions-item"),mt=(0,o.up)("el-descriptions");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(u,{style:{margin:"0px 50px"},class:"card-h"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{span:14},{default:(0,o.w5)((()=>[x,b])),_:1}),(0,o.Wm)(r,{span:2},{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1})])])),_:1}),(0,o.Wm)(r,{span:2},{default:(0,o.w5)((()=>[k,v])),_:1}),(0,o.Wm)(r,{span:2},{default:(0,o.w5)((()=>[(0,o._)("div",W,[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})])])),_:1}),(0,o.Wm)(r,{span:4},{default:(0,o.w5)((()=>[A,C])),_:1})])),_:1})])),_:1}),(0,o.Wm)(u,{style:{margin:"30px 50px "},class:"card-kb"},{default:(0,o.w5)((()=>[(0,o._)("div",V,[P,(0,o._)("span",U,[(0,o.Wm)(h,{style:{width:"300px"},modelValue:n.searchknowledgeQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchknowledgeQuery=e),placeholder:"请搜索知识库",class:"search-input"},null,8,["modelValue"]),S,D])]),(0,o.Wm)(g,{"title-placement":"left"}),(0,o.Wm)(m,{gutter:12},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{span:8},{default:(0,o.w5)((()=>[(0,o._)("div",T,[(0,o._)("div",z,[(0,o.Wm)(p,{text:"",onClick:t[1]||(t[1]=e=>s.createknowledgecard(this.createKb)),style:{color:"#0c89fd"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1})]),(0,o._)("div",L,[(0,o.Wm)(_,{text:"",onClick:t[2]||(t[2]=e=>s.createknowledgecard(this.createKb)),style:{"font-weight":"bold","font-size":"18  px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("新建知识库")])),_:1})]),K])])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.paginatedkbs,((e,t)=>((0,o.wg)(),(0,o.j4)(r,{span:8,key:t},{default:(0,o.w5)((()=>[(0,o._)("div",$,[(0,o._)("div",E,[(0,o._)("div",F,[(0,o._)("div",{class:"card-avatar",style:(0,w.j5)(s.generateSequentialColorStyle())},(0,w.zw)(e.name[0]),5),(0,o._)("span",j,(0,w.zw)(e.name),1)]),(0,o._)("div",q,[(0,o.Wm)(ce,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[(0,o.Wm)(de,{text:"",onClick:t=>s.editKnowledgeDialog(e)},{default:(0,o.w5)((()=>[(0,o.Uk)("编辑")])),_:2},1032,["onClick"]),(0,o.Wm)(de,{onClick:t=>s.getFileList(e)},{default:(0,o.w5)((()=>[(0,o.Uk)("文件")])),_:2},1032,["onClick"]),(0,o.Wm)(de,{onClick:t=>s.shareKnowledge(e)},{default:(0,o.w5)((()=>[(0,o.Uk)("分享")])),_:2},1032,["onClick"]),(0,o.Wm)(de,{onClick:t=>s.deleteKnowledge(e)},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,o.w5)((()=>[B])),_:2},1024)])]),(0,o._)("div",O," 详情："+(0,w.zw)(e.details),1),(0,o._)("div",H,[(0,o._)("div",M,[(0,o._)("div",I,[(0,o._)("div",R,"创建时间:"+(0,w.zw)(s.kbtime(e.time)),1),(0,o._)("div",Q,"文档数:"+(0,w.zw)(e.file.length),1),(0,o._)("div",Y,"应用数:"+(0,w.zw)(e.app.length),1)])]),(0,o._)("div",null,[(0,o.Wm)(me,{icon:n.UserFilled},null,8,["icon"])])])])])),_:2},1024)))),128))])),_:1}),(0,o.Wm)(ge,{class:"knowledgepagination",onCurrentChange:s.handlePageChangekb,"current-page":n.currentPagekb,"page-size":n.pageSizekb,total:n.filterAllkb.length},null,8,["onCurrentChange","current-page","page-size","total"])])),_:1}),(0,o.Wm)(Ee,{modelValue:n.uploadDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>n.uploadDialog=e),title:"知识库详情",width:"75%",style:{height:"670px"}},{default:(0,o.w5)((()=>[(0,o._)("div",Z,[(0,o._)("div",N,[(0,o._)("div",{style:(0,w.j5)([{width:"48px",height:"48px","margin-right":"10px","border-radius":"24px","line-height":"46px"},s.generateSequentialColorStyle()])},(0,w.zw)(n.current_kb.name[0]),5),(0,o._)("div",G,[(0,o._)("div",J,[(0,o._)("div",X,(0,w.zw)(n.current_kb.name),1),(0,o.Wm)(p,{style:(0,w.j5)([{"font-size":"large","margin-top":"5px","margin-left":"8px",cursor:"pointer"},s.buttonColor()]),onClick:t[3]||(t[3]=e=>s.editKnowledgeDialog(this.current_kb))},{default:(0,o.w5)((()=>[(0,o.Wm)(fe)])),_:1},8,["style"])]),(0,o._)("div",ee,"知识库详情："+(0,w.zw)(n.current_kb.details),1),te])])]),(0,o._)("div",le,[(0,o._)("div",ae,[oe,(0,o.Wm)(_,{onClick:t[4]||(t[4]=e=>n.uploadDialog2=!0),style:{"background-color":"#0c89fd",color:"aliceblue"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 上传文件")])),_:1})]),(0,o.Wm)($e,{class:"filelisttable",stripe:"",data:s.paginatedfiles},{default:(0,o.w5)((()=>[(0,o.Wm)(we,{fixed:"",prop:"time",label:"时间",width:"200",align:"center",formatter:s.filetime},null,8,["formatter"]),(0,o.Wm)(we,{prop:"filename",label:"文档名称",width:"160",align:"center",formatter:s.formatfilename},null,8,["formatter"]),(0,o.Wm)(we,{label:"文本分段规则",width:"160",align:"center"},{default:(0,o.w5)((e=>[(0,o.Uk)((0,w.zw)(s.methstate(e.row.meth)),1)])),_:1}),(0,o.Wm)(we,{prop:"maxSegmentLength",label:"文本分段最大长度",width:"160",align:"center"}),(0,o.Wm)(we,{align:"right",width:"160"},{header:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:n.searchfileListQuery,"onUpdate:modelValue":t[5]||(t[5]=e=>n.searchfileListQuery=e),style:{"margin-top":"12px"},placeholder:"Type to search"},null,8,["modelValue"]),ie])),default:(0,o.w5)((e=>[(0,o.Wm)(Le,{title:"确认删除?",onConfirm:t=>s.deleteFile(e.row)},{reference:(0,o.w5)((()=>[(0,o.Wm)(p,{style:{cursor:"pointer"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_e)])),_:1})])),_:2},1032,["onConfirm"]),(0,o.Wm)(p,{style:{"margin-left":"10px","margin-right":"50px",cursor:"pointer"},onClick:t=>s.DownloadFile(e.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke)])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),s.totalPagesfile>1?((0,o.wg)(),(0,o.j4)(ge,{key:0,class:"filepagination",onCurrentChange:s.handlePageChangefile,"current-page":n.currentPagefile,"page-size":n.pageSizefile,total:n.filterAllfile.length},null,8,["onCurrentChange","current-page","page-size","total"])):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),(0,o.Wm)(Ee,{modelValue:n.uploadDialog2,"onUpdate:modelValue":t[11]||(t[11]=e=>n.uploadDialog2=e),title:"上传文件",width:"75%",style:{height:"670px"},"after-close":"refresh()"},{footer:(0,o.w5)((()=>[(0,o._)("span",Ve,[(0,o.Wm)(_,{onClick:t[10]||(t[10]=e=>n.uploadDialog2=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(_,{type:"primary",onClick:s.uploadfileDialog2},{default:(0,o.w5)((()=>[(0,o.Uk)("完成")])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(st,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe,{style:{width:"360px","margin-top":"15px"}},{default:(0,o.w5)((()=>[(0,o._)("div",ne,[se,0==n.uploadfilelabel?((0,o.wg)(),(0,o.iD)("div",re,ue)):(0,o.kq)("",!0),1==n.uploadfilelabel?((0,o.wg)(),(0,o.iD)("div",he,xe)):(0,o.kq)("",!0)])])),_:1}),(0,o.Wm)(nt,{class:"createkbcard-upload",style:{"box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","border-radius":"8px",width:"85%","margin-right":"100px","padding-left":"75px","margin-top":"15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Oe,{ref:"upload","default-upload":!1,drag:"",accept:".txt",max:1,onChange:s.handleChange,style:{"text-align":"left"}},{default:(0,o.w5)((()=>[(0,o._)("div",be,[ye,(0,o._)("div",ke,[(0,o.Wm)(p,{style:{"font-size":"50px",color:"rgb(125, 181, 249)"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Be)])),_:1}),ve,We])])])),_:1},8,["onChange"]),(0,o._)("div",Ae,[Ce,(0,o.Wm)(it,{model:n.filestate},{default:(0,o.w5)((()=>[(0,o.Wm)(ot,{class:"el-form-item-text",label:"标签标题前缀",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{modelValue:n.filestate.addTitlePrefix,"onUpdate:modelValue":t[7]||(t[7]=e=>n.filestate.addTitlePrefix=e),placeholder:"是否添加标签标题",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(He,{label:"是",value:"0"}),(0,o.Wm)(He,{label:"否",value:"1"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{class:"el-form-item-text",label:"文本分段规则",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{modelValue:n.filestate.meth,"onUpdate:modelValue":t[8]||(t[8]=e=>n.filestate.meth=e),placeholder:"选择文本分段规则",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(He,{label:"/n",value:"0"}),(0,o.Wm)(He,{label:"。",value:"1"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{class:"el-form-item-text",label:"分段最大长度",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:n.filestate.maxSegmentLength,"onUpdate:modelValue":t[9]||(t[9]=e=>n.filestate.maxSegmentLength=e),placeholder:"请输入分段最大长度,在1-2000之间",type:"number",oninput:"value=value.replace(/[^\\d.]/g,'');if(value>2000) value=2000;if(value<1)value=1",min:"1",max:"1000"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ee,{modelValue:n.dialogVisible,"onUpdate:modelValue":t[18]||(t[18]=e=>n.dialogVisible=e),title:"新建知识库",width:"75%","before-close":s.handleDialogClose,style:{height:"700px",display:"flex","flex-direction":"column","justify-content":"space-between"}},{footer:(0,o.w5)((()=>[(0,o._)("span",et,[2!=n.currentStep?((0,o.wg)(),(0,o.j4)(_,{key:0,onClick:s.quitcreate},{default:(0,o.w5)((()=>[(0,o.Uk)("退出")])),_:1},8,["onClick"])):(0,o.kq)("",!0),1==n.currentStep?((0,o.wg)(),(0,o.j4)(_,{key:1,type:"primary",onClick:s.handlePrevStep},{default:(0,o.w5)((()=>[(0,o.Uk)("上一步")])),_:1},8,["onClick"])):(0,o.kq)("",!0),2!=n.currentStep?((0,o.wg)(),(0,o.j4)(_,{key:2,type:"primary",onClick:s.handleNextStep},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(n.createknowledgecardbutton),1)])),_:1},8,["onClick"])):(0,o.kq)("",!0),(0,o._)("div",tt,[2==n.currentStep?((0,o.wg)(),(0,o.j4)(_,{key:0,type:"primary",onClick:s.createKnowledgesuccess},{default:(0,o.w5)((()=>[(0,o.Uk)("恭喜你，知识库创建成功！")])),_:1},8,["onClick"])):(0,o.kq)("",!0)])])])),default:(0,o.w5)((()=>[(0,o.Wm)(dt,{active:n.currentStep,"align-center":""},{default:(0,o.w5)((()=>[(0,o.Wm)(rt,{title:"知识库信息",description:"知识库基本信息"}),(0,o.Wm)(rt,{title:"文档配置",description:"上传文档,配置文档信息"}),(0,o.Wm)(rt,{title:"完成",description:"知识库创建完成"})])),_:1},8,["active"]),(0,o.wy)((0,o._)("div",Pe,[(0,o.Wm)(st,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe,{style:{width:"360px","margin-top":"15px"}},{default:(0,o.w5)((()=>[Ue])),_:1}),(0,o.Wm)(nt,{class:"createkbcard"},{default:(0,o.w5)((()=>[(0,o.Wm)(it,{model:n.form,style:{width:"85%"}},{default:(0,o.w5)((()=>[Se,(0,o.Wm)(ot,{label:"知识名称："},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{maxlength:"20",modelValue:n.form.name,"onUpdate:modelValue":t[12]||(t[12]=e=>n.form.name=e),"show-word-limit":"",placeholder:"请输入知识库名称,不超过20字",type:"text"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{label:"知识描述："},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:n.form.description,"onUpdate:modelValue":t[13]||(t[13]=e=>n.form.description=e),maxlength:"100",placeholder:"请输入知识库描述,不超过100字","show-word-limit":"",type:"textarea",rows:"3",style:{height:"75px"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{label:"向量化模型",style:{width:"598px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{modelValue:n.form.model,"onUpdate:modelValue":t[14]||(t[14]=e=>n.form.model=e),placeholder:"选择模型",style:{width:"598px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(He,{label:"OpenAI Embedding",value:"zhipu"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})],512),[[a.F8,0===n.currentStep]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(st,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe,{style:{width:"360px","margin-top":"15px"}},{default:(0,o.w5)((()=>[(0,o._)("div",De,[Te,0==n.uploadfilelabel?((0,o.wg)(),(0,o.iD)("div",ze,Fe)):(0,o.kq)("",!0),1==n.uploadfilelabel?((0,o.wg)(),(0,o.iD)("div",je,Me)):(0,o.kq)("",!0)])])),_:1}),(0,o.Wm)(nt,{class:"createkbcard-upload",style:{"box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","border-radius":"8px",width:"85%","margin-right":"100px","padding-left":"75px","margin-top":"15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Oe,{ref:"upload","default-upload":!1,drag:"",accept:".txt",max:1,onChange:s.handleChange,style:{"text-align":"left"}},{default:(0,o.w5)((()=>[(0,o._)("div",Ie,[Re,(0,o._)("div",Qe,[(0,o.Wm)(p,{style:{"font-size":"50px",color:"rgb(125, 181, 249)"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Be)])),_:1}),Ye,Ze])])])),_:1},8,["onChange"]),(0,o._)("div",Ne,[Ge,(0,o.Wm)(it,{model:n.filestate},{default:(0,o.w5)((()=>[(0,o.Wm)(ot,{class:"el-form-item-text",label:"标签标题前缀",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{modelValue:n.filestate.addTitlePrefix,"onUpdate:modelValue":t[15]||(t[15]=e=>n.filestate.addTitlePrefix=e),placeholder:"是否添加标签标题",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(He,{label:"是",value:"0"}),(0,o.Wm)(He,{label:"否",value:"1"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{class:"el-form-item-text",label:"文本分段规则",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{modelValue:n.filestate.meth,"onUpdate:modelValue":t[16]||(t[16]=e=>n.filestate.meth=e),placeholder:"选择文本分段规则",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(He,{label:"/n",value:"0"}),(0,o.Wm)(He,{label:"。",value:"1"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{class:"el-form-item-text",label:"分段最大长度",style:{width:"550px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:n.filestate.maxSegmentLength,"onUpdate:modelValue":t[17]||(t[17]=e=>n.filestate.maxSegmentLength=e),placeholder:"请输入分段最大长度,在1-2000之间",type:"number",oninput:"value=value.replace(/[^\\d.]/g,'');if(value>2000) value=2000;if(value<1)value=1",min:"1",max:"1000"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1})])),_:1})],512),[[a.F8,1===n.currentStep]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(u,{class:"create-success-card",shadow:"never"},{header:(0,o.w5)((()=>[(0,o._)("div",Je,[(0,o.Wm)(pt,{icon:"success",title:"知识库创建完成！"})])])),default:(0,o.w5)((()=>[(0,o._)("div",Xe,[(0,o.Wm)(mt,{columns:1,border:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(ct,{label:"知识库名称",span:20,"label-class-name":"result-label"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(n.createKb.knowledgename),1)])),_:1}),(0,o.Wm)(ct,{label:"上传文档",span:20,"label-class-name":"result-label"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(n.createKb.filename),1)])),_:1}),(0,o.Wm)(ct,{label:"文档分段设置",span:20,"label-class-name":"result-label"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(s.methstate(n.createKb.meth)),1)])),_:1}),(0,o.Wm)(ct,{label:"分段最大长度",span:20,"label-class-name":"result-label"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(n.createKb.maxSegmentLength),1)])),_:1})])),_:1})])])),_:1})],512),[[a.F8,2===n.currentStep]])])),_:1},8,["modelValue","before-close"]),(0,o.Wm)(Ee,{modelValue:n.dialogVisibleedit,"onUpdate:modelValue":t[23]||(t[23]=e=>n.dialogVisibleedit=e),title:"编辑知识库",width:"50%"},{footer:(0,o.w5)((()=>[(0,o._)("span",lt,[(0,o.Wm)(_,{onClick:t[22]||(t[22]=e=>n.dialogVisibleedit=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("Cancel")])),_:1}),(0,o.Wm)(_,{type:"primary",onClick:s.editknowledge},{default:(0,o.w5)((()=>[(0,o.Uk)(" 保存 ")])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(it,{model:n.form},{default:(0,o.w5)((()=>[(0,o.Wm)(ot,{label:"知识名称："},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:n.form.name,"onUpdate:modelValue":t[19]||(t[19]=e=>n.form.name=e),maxlength:"20",type:"text","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{label:"知识描述："},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:n.form.description,"onUpdate:modelValue":t[20]||(t[20]=e=>n.form.description=e),maxlength:"100",type:"textarea",rows:"3","show-word-limit":"",style:{height:"75px"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(ot,{label:"向量化模型",style:{width:"790px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{modelValue:n.form.model,"onUpdate:modelValue":t[21]||(t[21]=e=>n.form.model=e),placeholder:"选择模型",style:{width:"790px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(He,{label:"OpenAI Embedding",value:"openAI"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}l(8858),l(1318),l(3228);var ot=l(65),it=l(4161);const nt={create:e=>e.createApp.create,submit:e=>e.submitApp.submit,edit:e=>e.createApp.edit,delete:e=>e.deleteApp.deleteapp,allapp:e=>e.getallApp.allapp,app:e=>e.getApp.app,openapp:e=>e.openApp.openapp,stopapp:e=>e.stopApp.stopapp,testapp:e=>e.testApp.testapp,prompt:e=>e.submitPrompt.prompt,stoptestapp:e=>e.stoptestApp.stoptestapp,knowledge_list:e=>e.get_knowledgebase.knowledge,test_hello:e=>e.test_services.hello,knowledgeList:e=>e.knowledge.knowledgeList,fileList:e=>e.file.fileList};var st=nt;function rt(e){return Ml({url:"app",method:"post",data:e})}const dt=()=>({create:[]}),pt=dt(),ct={UPDATE_CREATE:(e,t)=>{e.create=t}},mt={createApp({commit:e},t){return new Promise(((l,a)=>{rt(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_CREATE",a),l()})).catch((e=>{a(e)}))}))}};var ut={namespaced:!0,state:pt,mutations:ct,actions:mt};function ht(e){return Ml({url:`/app/${e._id}`,method:"put",data:e})}const gt=()=>({edit:[]}),ft=gt(),wt={UPDATE_EDIT:(e,t)=>{e.edit=t}},_t={editApp({commit:e},t){return new Promise(((l,a)=>{ht(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_EDIT",a),l()})).catch((e=>{a(e)}))}))}};var xt={namespaced:!0,state:ft,mutations:wt,actions:_t};function bt(e){return console.log(e),Ml({url:`app/${e._id}`,method:"delete",data:e})}const yt=()=>({deleteapp:[]}),kt=yt(),vt={UPDATE_DELETEAPP:(e,t)=>{e.deleteapp=t}},Wt={deleteApp({commit:e},t){return new Promise(((l,a)=>{bt(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_DELETEAPP",a),l()})).catch((e=>{a(e)}))}))}};var At={namespaced:!0,state:kt,mutations:vt,actions:Wt};function Ct(){return Ml({url:"/knowledgebase",method:"get"})}const Vt=()=>({knowledge:[]}),Pt=Vt(),Ut={UPDATE_KNOWLEDGE:(e,t)=>{e.knowledge=t}},St={getKnowledgeList({commit:e}){return new Promise(((t,l)=>{Ct().then((l=>{console.log(l.data);const a=l.data;e("UPDATE_KNOWLEDGE",a),t()})).catch((e=>{l(e)}))}))}};var Dt={namespaced:!0,state:Pt,mutations:Ut,actions:St};function Tt(){return Ml({url:"app",method:"get"})}const zt=()=>({allapp:[]}),Lt=zt(),Kt={UPDATE_ALLAPP:(e,t)=>{e.allapp=t}},$t={getallApp({commit:e}){return new Promise(((t,l)=>{Tt().then((l=>{console.log(l.data);const a=l.data;e("UPDATE_ALLAPP",a),t()})).catch((e=>{l(e)}))}))}};var Et={namespaced:!0,state:Lt,mutations:Kt,actions:$t};function Ft(e){return Ml({url:`/app/${e._id}`,method:"get",data:e})}const jt=()=>({app:[]}),qt=jt(),Bt={UPDATE_APP:(e,t)=>{e.app=t}},Ot={getApp({commit:e},t){return new Promise(((l,a)=>{Ft(t).then((t=>{console.log(t.data);const a=t.data.app;e("UPDATE_APP",a),l()})).catch((e=>{a(e)}))}))}};var Ht={namespaced:!0,state:qt,mutations:Bt,actions:Ot};function Mt(e){return Ml({url:`/issue/${e}`,method:"get"})}const It=()=>({submit:[]}),Rt=It(),Qt={UPDATE_SUBMIT:(e,t)=>{e.submit=t}},Yt={submitApp({commit:e},t){return new Promise(((l,a)=>{Mt(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_SUBMIT",a),l()})).catch((e=>{a(e)}))}))}};var Zt={namespaced:!0,state:Rt,mutations:Qt,actions:Yt};function Nt(e){return Ml({url:`/issue/${e._id}`,method:"post",data:e})}const Gt=()=>({openapp:[]}),Jt=Gt(),Xt={UPDATE_OPENAPP:(e,t)=>{e.openapp=t}},el={openApp({commit:e},t){return new Promise(((l,a)=>{Nt(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_OPENAPP",a),l()})).catch((e=>{a(e)}))}))}};var tl={namespaced:!0,state:Jt,mutations:Xt,actions:el};function ll(e){return Ml({url:`/stopapp/${e}`,method:"post"})}const al=()=>({stopapp:[]}),ol=al(),il={UPDATE_STOPAPP:(e,t)=>{e.stopapp=t}},nl={stopApp({commit:e},t){return new Promise(((l,a)=>{ll(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_STOPAPP",a),l()})).catch((e=>{a(e)}))}))}};var sl={namespaced:!0,state:ol,mutations:il,actions:nl};function rl(e){return Ml({url:`/testapp/${e}`,method:"post"})}const dl=()=>({testapp:[]}),pl=dl(),cl={UPDATE_TESTAPP:(e,t)=>{e.testapp=t}},ml={testApp({commit:e},t){return new Promise(((l,a)=>{rl(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_TESTAPP",a),l()})).catch((e=>{a(e)}))}))}};var ul={namespaced:!0,state:pl,mutations:cl,actions:ml};function hl(e){return Ml({url:`/app/prompt/${e._id}`,method:"put",data:e})}const gl=()=>({prompt:[]}),fl=gl(),wl={UPDATE_PROMPT:(e,t)=>{e.prompt=t}},_l={submitPrompt({commit:e},t){return new Promise(((l,a)=>{hl(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_PROMPT",a),l()})).catch((e=>{a(e)}))}))}};var xl={namespaced:!0,state:fl,mutations:wl,actions:_l};function bl(e){return Ml({url:`/stoptestapp/${e}`,method:"post"})}const yl=()=>({stoptestapp:[]}),kl=yl(),vl={UPDATE_STOPTESTAPP:(e,t)=>{e.stoptestapp=t}},Wl={stoptestApp({commit:e},t){return new Promise(((l,a)=>{bl(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_STOPTESTAPP",a),l()})).catch((e=>{a(e)}))}))}};var Al={namespaced:!0,state:kl,mutations:vl,actions:Wl};const Cl=()=>({knowledgeList:[]}),Vl=Cl(),Pl={UPDATE_KNOWLEDGE:(e,t)=>{e.knowledgeList=t}},Ul={getKnowledgeList({commit:e}){return new Promise(((t,l)=>{Rl().then((l=>{console.log(l.data);const a=l.data;console.log(a),e("UPDATE_KNOWLEDGE",a),t()})).catch((e=>{l(e)}))}))}};var Sl={namespaced:!0,state:Vl,mutations:Pl,actions:Ul};function Dl(e,t){const l="upload/"+t;return Ml({url:l,method:"post",data:e})}function Tl(e,t){const l="upload/"+t;return Ml({url:l,method:"post",data:e})}function zl(e){return Ml({url:"file/kbid/"+e,method:"get"})}function Ll(e){return Ml({url:"download/"+e,method:"get"})}const Kl=()=>({fileList:[]}),$l=Kl(),El={UPDATE_FILELIST:(e,t)=>{e.fileList=t}},Fl={uploadFile({commit:e},t){return new Promise(((l,a)=>{Dl(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_FILELIST",a),l()})).catch((e=>{a(e)}))}))},getFileListByKBId({commit:e},t){return console.log(t),new Promise(((l,a)=>{zl(t).then((t=>{console.log(t.data);const a=t.data;e("UPDATE_FILELIST",a),l()})).catch((e=>{a(e)}))}))}};var jl={namespaced:!0,state:$l,mutations:El,actions:Fl};const ql=new ot.ZP.Store({modules:{createApp:ut,editApp:xt,deleteApp:At,get_knowledgebase:Dt,getallApp:Et,getApp:Ht,knowledge:Sl,submitApp:Zt,openApp:tl,stopApp:sl,testApp:ul,submitPrompt:xl,stoptestApp:Al,file:jl},getters:st});var Bl=ql,Ol=l(7178);const Hl=it.Z.create({baseURL:"/admin_api",timeout:12e4});Hl.interceptors.request.use((e=>e),(e=>(console.log(e),Promise.reject(e)))),Hl.interceptors.response.use((e=>e),(e=>{let t=e.message;const l=["DataSourceNotFound","DataSourceAlreadyExist"];let a="";return e.response.data&&(t=e.response.data.error??e.response.data,a=e.response.data.code??""),a&&-1!==l.indexOf(a)||(0,Ol.z8)({message:t,type:"error",duration:5e3}),Promise.reject(e.response.data)}));var Ml=Hl;function Il(e){return Ml({url:"knowledgebase",method:"post",data:e})}function Rl(){return Ml({url:"knowledgebase",method:"get"})}function Ql(e){return Ml({url:"remove/"+e,method:"delete"})}function Yl(e){return Ml({url:"knowledgebase/"+e,method:"delete"})}function Zl(e){return Ml({url:"knowledgebase/"+e._id,method:"put",data:e})}function Nl(e,t){console.log(e);const l="file/"+t;return Ml({url:l,method:"put",data:e})}var Gl=l(2748),Jl=(l(1693),{name:"KnowledgeBase",components:{School:Gl.W2,Search:Gl.olm,UploadFilled:Gl.AQM,Delete:Gl.HG3,Download:Gl.UWx,Right:Gl.O6d,Document:Gl.BBB,DocumentAdd:Gl.kb8,FolderChecked:Gl.g1o,Edit:Gl.I8b},data(){return{buttoncolor:"",tagcolor:"",currentPagekb:1,pageSizekb:5,currentPagefile:1,pageSizefile:6,UserFilled:Gl.wvC,createknowledgecardbutton:"下一步",inputValue:"",colorListIndex:0,currentStep:0,uploadfilelabel:0,searchknowledgeQuery:"",searchkbQuery:"",searchkbResults:"",searchfileListQuery:"",searchfileQuery:"",searchfileResults:"",kbcard:{filenumber:"1",time:"",appnumber:"0"},colorList:[{background:"#87CEFA",color:"#0000FF"},{background:"#7FFFAA",color:"#228B22"},{background:"#FDF5E6",color:"#FFA500"},{background:"#FFA07A",color:"#FF4500"},{background:"#FFB6C1",color:"#FF1493"}],test:"test",file:[],filestate:{addTitlePrefix:"",maxSegmentLength:"",meth:"1"},dialogVisible:!1,dialogVisibleedit:!1,uploadDialog:!1,uploadDialog2:!1,form:{name:"",description:"",model:"",user:"admin",files:[]},knowledge_upload:{files:[]},createKb:{knowledgename:"",filename:"",model:"",description:"",maxSegmentLength:"",meth:"",addTitlePrefix:""},current_kl:"",current_kb:"",currentAllkb:[],filterAllkb:[],currentAllfile:[],filterAllfile:[]}},computed:{...(0,ot.Se)(["test_hello","knowledgeList","fileList"]),totalPageskb(){return Math.ceil(this.filterAllkb.length/this.pageSizekb)},totalPagesfile(){return Math.ceil(this.filterAllfile.length/this.pageSizefile)},paginatedkbs(){this.filterAllkb=this.filter_allkb();const e=(this.currentPagekb-1)*this.pageSizekb,t=e+this.pageSizekb;return this.filterAllkb.slice(e,t)},paginatedfiles(){this.filterAllfile=this.filter_allfile();const e=(this.currentPagefile-1)*this.pageSizefile,t=e+this.pageSizefile;return console.log(this.filterAllfile.slice(e,t)),this.filterAllfile.slice(e,t)}},mounted(){this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")}))},methods:{refresh(){this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")}))},openCreateDialog(){this.dialogVisible=!0,this.form.name="",this.form.description="",this.form.model=""},shareKnowledge(){console.log("分享")},handleDialogClose(){this.$confirm("是否退出创建？信息将不会保留！如果你想暂存输入信息，请点击退出按钮！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.currentStep=0,this.dialogVisible=!1})).catch((()=>{console.log("用户取消退出")}))},createKnowledgesuccess(){this.dialogVisible=!1,this.currentStep=0,this.createKb={}},handlePageChangekb(e){console.log(this.currentPagekb),this.currentPagekb=e},handlePageChangefile(e){console.log(this.currentPagefile),this.currentPagefile=e},methstate(e){return"0"==e?"/n":"1"==e?"。":"未定义！"},DownloadFile(e){Ll(e._id).then((t=>{console.log(t);const l=t.data,a=new Blob([l],{type:"text/plain"}),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=e.filename,document.body.appendChild(i),i.click()}))},createknowledgecard(e){this.dialogVisible=!0,this.form.name=e.knowledgename,this.form.description=e.description,this.form.model=e.model,this.filestate.addTitlePrefix=e.addTitlePrefix,this.filestate.maxSegmentLength=e.maxSegmentLength,this.filestate.meth=e.meth},handleNextStep(){if(this.uploadfilelabel=0,0==this.currentStep){if(""==this.form.name||""==this.form.description)return void this.$message.warning("知识库名称或知识库描述不能为空！");this.createknowledgecardbutton="创建"}if(1==this.currentStep){if(0==this.file.length)return void this.$message.warning("请上传知识库文件！");const e={name:this.form.name,details:this.form.description};this.createKb.knowledgename=e.name,this.createKb.description=e.details,this.createKb.model="zhipu",Il(e).then((e=>{if(e.data){this.createknowledgecardbutton="下一步",this.currentStep++;const t=new FormData;t.append("file",this.file[0].file),this.createKb.filename=this.file[0].file.name,console.log(this.file[0].file),Tl(t,e.data.data._id).then((e=>{console.log(e);const t={addTitlePrefix:this.filestate.addTitlePrefix,meth:this.filestate.meth,maxSegmentLength:this.filestate.maxSegmentLength};console.log(t),this.createKb.maxSegmentLength=this.filestate.maxSegmentLength,this.createKb.meth=this.filestate.meth,this.createKb.addTitlePrefix=this.filestate.addTitlePrefix,Nl(t,e.data.data._id).then((e=>{console.log(e),e.data&&(this.$refs.upload.clear(),this.file=[],this.filestate={addTitlePrefix:"",maxSegmentLength:"",meth:"1"},this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})))})).catch((e=>{this.$message.error("上传失败！")}))}))}})).catch((e=>{}))}this.currentStep<1&&this.currentStep++},uploadfileDialog2(){if(0==this.file.length)return void this.$message.warning("请上传知识库文件！");this.uploadfilelabel=0;const e=new FormData;e.append("file",this.file[0].file),Tl(e,this.current_kl).then((e=>{this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")})),console.log(e);const t={addTitlePrefix:this.filestate.addTitlePrefix,meth:this.filestate.meth,maxSegmentLength:this.filestate.maxSegmentLength};console.log(t),Nl(t,e.data.data._id).then((e=>{console.log(e),e.data&&(this.$refs.upload.clear(),this.file=[],this.filestate={addTitlePrefix:"",maxSegmentLength:"",meth:"1"},this.$store.dispatch("file/getFileListByKBId",this.current_kl).then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")})))})).catch((e=>{console.log(e),this.$message.error("删除失败！")}))})),this.uploadDialog2=!1},handlePrevStep(){1==this.currentStep&&(this.createknowledgecardbutton="下一步"),0<this.currentStep&&this.currentStep<=2&&this.currentStep--},filetime(e,t,l){return l.substring(0,10)+" "+l.substring(12,19)},kbtime(e){return e.substring(0,10)+" "+e.substring(12,19)},formatfilename(e,t,l){return l},generateSequentialColorStyle(){const e=this.colorList[this.colorListIndex];return this.colorListIndex=(this.colorListIndex+1)%this.colorList.length,this.buttoncolor=e.background,this.tagcolor=e.color,{"background-color":e.background,color:e.color}},buttonColor(){return{color:this.buttoncolor}},tagColor(){return{color:this.tagcolor}},createKnowledge(){const e={name:this.form.name,details:this.form.description};Il(e).then((e=>{e.data&&this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")}))}))},filter_allkb(){return this.knowledgeList.filter((e=>e.name.includes(this.searchknowledgeQuery)))},filter_allfile(){return this.fileList.filter((e=>e.filename.includes(this.searchfileListQuery)))},handleChange(e){this.file=e.fileList,this.uploadfilelabel=1},editknowledge(){this.dialogVisibleedit=!1;const e={_id:this.form._id,name:this.form.name,details:this.form.description};this.current_kb=e,Zl(e).then((e=>{e.data&&this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")})),this.$message.success("更新知识库成功！"),console.log(e)}))},editKnowledgeDialog(e){this.dialogVisibleedit=!0,console.log(e),this.form._id=e._id,this.form.name=e.name,this.form.description=e.details,this.form.model="zhipu"},getFileList(e){console.log(e),this.current_kb=e,this.uploadDialog=!0,this.current_kl=e._id,this.$store.dispatch("file/getFileListByKBId",this.current_kl).then((e=>{console.log(this.file.length)})).catch((()=>{console.log("获取文件列表失败！")}))},quitcreate(){this.$confirm("是否需要保存该条记录吗？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"不保存",type:"warning"}).then((()=>{this.createKb.knowledgename=this.form.name,this.createKb.description=this.form.description,this.createKb.model=this.form.model,this.createKb.addTitlePrefix=this.filestate.addTitlePrefix,this.createKb.maxSegmentLength=this.filestate.maxSegmentLength,this.createKb.meth=this.filestate.meth,console.log(this.createKb),this.dialogVisible=!1})).catch((e=>{"cancel"==e&&(this.currentStep=0,this.createknowledgecardbutton="下一步",this.createKb={},this.dialogVisible=!1),"close"==e&&console.log("取消退出！")}))},deleteKnowledge(e){"0"==e.app.length?this.$confirm("确认删除该条记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Yl(e._id).then((e=>{console.log(e),e.data&&this.$store.dispatch("knowledge/getKnowledgeList").then((()=>{})).catch((()=>{console.log("[KnowledgeBase]: 删除失败！")}))}))})).catch((()=>{console.log("用户取消删除")})):this.$message.success("当前知识库已绑定应用，暂不能删除！")},deleteFile(e){Ql(e._id).then((e=>{this.$message.success("删除成功！"),this.$store.dispatch("file/getFileListByKBId",this.current_kl).then((e=>{console.log(e)})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")}))})).catch((e=>{this.$message.error("删除失败！")}))}},props:{msg:String}});const Xl=(0,d.Z)(Jl,[["render",at],["__scopeId","data-v-40c35624"]]);var ea=Xl,ta=l(4870);function la(e){return Ml({url:"upload",method:"post",data:e})}var aa={data(){return{test:"test",file:(0,ta.iH)([])}},name:"HomeView",computed:{...(0,ot.Se)(["test_hello"])},components:{KnowledgeBase:ea},mounted(){},methods:{submitUpload(){console.log(this.file[0]);const e=new FormData;e.append("file",this.file[0].file),la(e).then((e=>{console.log(e.data)}))},handleChange(e){this.file=e.fileList}}};const oa=(0,d.Z)(aa,[["render",f]]);var ia=oa,na=(l(560),l.p+"img/images.4ed604ae.jpg");const sa=e=>((0,o.dD)("data-v-340fae19"),e=e(),(0,o.Cn)(),e),ra=sa((()=>(0,o._)("div",{class:"container"},[(0,o._)("h2",null,"大模型应用底座平台"),(0,o._)("h2",{style:{color:"#0c89fd"}},"应用构建"),(0,o._)("br")],-1))),da=sa((()=>(0,o._)("h5",{style:{"text-align":"left",color:"#808080"}}," 欢迎来到大模型对话应用！在这里您可以自由创建、管理您的大模型问答应用。 您可以根据需要选择已创建的知识库、编写专属提示词、选用最合适的大模型来创建问答应用，期待大模型能够理解并回答您的各类问题！ ",-1))),pa=sa((()=>(0,o._)("img",{alt:"",src:na,style:{float:"right"}},null,-1))),ca={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ma=sa((()=>(0,o._)("span",null,[(0,o._)("h3",{style:{margin:"0"}},"应用列表")],-1))),ua={style:{display:"flex","justify-content":"center","align-items":"center"},class:"search-container2"},ha=sa((()=>(0,o._)("i",{class:"search-icon2"},"🔍",-1))),ga=sa((()=>(0,o._)("ul",{id:"searchResults"},null,-1))),fa=sa((()=>(0,o._)("br",null,null,-1))),wa=sa((()=>(0,o._)("br",null,null,-1))),_a=sa((()=>(0,o._)("p",null,"快来创建你的应用吧",-1))),xa={class:"module"},ba={class:"app-head-row"},ya={class:"app-name"},ka={class:"card-dropdown"},va=sa((()=>(0,o._)("span",{class:"el-dropdown-link"}," ··· ",-1))),Wa=sa((()=>(0,o._)("h3",{style:{"margin-left":"20px","margin-top":"0px",height:"10px"}},"应用名称",-1))),Aa={style:{"margin-left":"20px"}},Ca=sa((()=>(0,o._)("h3",{style:{"margin-left":"20px",height:"10px"}},"添加用户",-1))),Va={class:"search-container"},Pa=sa((()=>(0,o._)("i",{class:"search-icon"},"🔍",-1))),Ua={key:0,class:"infinite-list",style:{"max-height":"140px","overflow-y":"auto"}},Sa={class:"infinite-list",style:{overflow:"auto"}},Da=["onClick"],Ta=sa((()=>(0,o._)("div",null,[(0,o._)("h3",{style:{"margin-left":"20px",height:"10px"}},"权限"),(0,o._)("p",{style:{"margin-left":"20px"}},"被选择的用户具有该发布应用的对话权限")],-1))),za={style:{"text-align":"right"}},La={class:"app-detail"},Ka={class:"app-description"},$a={class:"descriptioncounts"},Ea={style:{"text-align":"left"}};function Fa(e,t,l,a,i,n){const s=(0,o.up)("el-col"),r=(0,o.up)("el-row"),d=(0,o.up)("el-card"),p=(0,o.up)("el-input"),c=(0,o.up)("n-divider"),m=(0,o.up)("Management"),u=(0,o.up)("el-icon"),h=(0,o.up)("el-button"),g=(0,o.up)("el-tag"),f=(0,o.up)("el-dropdown-item"),_=(0,o.up)("el-dropdown-menu"),x=(0,o.up)("el-dialog"),b=(0,o.up)("el-dropdown"),y=(0,o.up)("router-view"),k=(0,o.up)("el-pagination"),v=(0,o.up)("el-form-item"),W=(0,o.up)("el-form");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(d,{style:{margin:"0px 50px"},class:"card-h"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{span:10},{default:(0,o.w5)((()=>[ra,da])),_:1}),(0,o.Wm)(s,{span:14},{default:(0,o.w5)((()=>[pa])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d,{style:{margin:"19px 50px"},class:"card-kb"},{default:(0,o.w5)((()=>[(0,o._)("div",ca,[ma,(0,o._)("span",ua,[(0,o.Wm)(p,{style:{width:"300px"},modelValue:i.searcAppQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searcAppQuery=e),placeholder:"请搜索应用",class:"search-input"},null,8,["modelValue"]),ha,ga])]),(0,o.Wm)(c,{"title-placement":"left"}),(0,o.Wm)(r,{gutter:12,style:{"margin-top":"0px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{span:8,style:{height:"20px"}},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"module",style:{border:"1px dashed #aad8e3",cursor:"pointer"},onClick:t[1]||(t[1]=t=>e.$router.push("/create"))},[fa,(0,o.Wm)(u,{style:{color:"#0c89fd","font-size":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1}),wa,(0,o.Wm)(h,{text:""},{default:(0,o.w5)((()=>[(0,o.Uk)("新建应用")])),_:1}),_a])])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paginatedApps,(l=>((0,o.wg)(),(0,o.j4)(s,{span:8,key:l._id},{default:(0,o.w5)((()=>[(0,o._)("div",xa,[(0,o._)("div",ba,[(0,o._)("div",ya,[(0,o._)("div",{class:"app-avatar",style:(0,w.j5)(n.generateRandomColorStyle())},(0,w.zw)(l.name[0]),5),(0,o.Wm)(h,{text:"",onClick:t=>e.$router.push("/detail/"+l._id)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(l.name),1)])),_:2},1032,["onClick"]),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(l.state),1)])),_:2},1024)]),(0,o._)("div",ka,[(0,o.Wm)(b,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:n.authorizeapp},{default:(0,o.w5)((()=>[(0,o.Uk)("授权")])),_:1},8,["onClick"]),(0,o.Wm)(f,{onClick:e=>n.editapp(l)},{default:(0,o.w5)((()=>[(0,o.Uk)("编辑")])),_:2},1032,["onClick"]),(0,o.Wm)(f,{onClick:e=>n.deleteapp(l)},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:2},1032,["onClick"])])),_:2},1024),(0,o.Wm)(x,{modelValue:i.dialogVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>i.dialogVisible=e),title:"授权",width:"55%"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Wa,(0,o._)("p",Aa,(0,w.zw)(l.name),1)]),Ca,(0,o._)("div",Va,[(0,o.Wm)(p,{modelValue:i.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=e=>i.searchQuery=e),placeholder:"请搜索用户姓名/账号",class:"search-input"},null,8,["modelValue"]),Pa]),i.searchQuery?((0,o.wg)(),(0,o.iD)("div",Ua,[(0,o._)("ul",Sa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.matchedAccounts,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"infinite-list-item",key:e,onClick:t=>n.selectAccount(e)},[(0,o._)("div",null,(0,w.zw)(e),1)],8,Da)))),128))])])):(0,o.kq)("",!0),Ta,(0,o._)("div",za,[(0,o.Wm)(h,{onClick:t[3]||(t[3]=e=>i.dialogVisible=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(h,{onClick:n.inviteUser},{default:(0,o.w5)((()=>[(0,o.Uk)("搜索并邀请")])),_:1},8,["onClick"])])])),_:2},1032,["modelValue"])])),default:(0,o.w5)((()=>[va])),_:2},1024)])]),(0,o._)("p",La,(0,w.zw)(l.details),1),(0,o._)("div",Ka,[(0,o._)("div",$a,"调用次数"+(0,w.zw)(l.num),1)]),(0,o.Wm)(y)])])),_:2},1024)))),128))])),_:1}),n.totalPages>1?((0,o.wg)(),(0,o.j4)(k,{key:0,onCurrentChange:n.handlePageChange,"current-page":i.currentPage,"page-size":i.pageSize,total:i.filterAllapp.length},null,8,["onCurrentChange","current-page","page-size","total"])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(x,{modelValue:i.dialogAddThemeVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>i.dialogAddThemeVisible=e),title:"新建主题",width:"30%"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{model:i.form_create,"label-width":"120px",style:{"margin-top":"1px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{"margin-top":"20px"},label:"主题名称",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:i.form_create.theme,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form_create.theme=e),style:{width:"600px"}},null,8,["modelValue"])])),_:1}),(0,o._)("div",Ea,[(0,o.Wm)(h,{type:"primary",plain:"",onClick:t[6]||(t[6]=e=>i.dialogAddThemeVisible=!1),style:{"margin-left":"160px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(h,{type:"primary",onClick:t[7]||(t[7]=e=>n.createTheme())},{default:(0,o.w5)((()=>[(0,o.Uk)("保存")])),_:1})])])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,o.Wm)(x,{modelValue:i.dialogEditThemeVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>i.dialogEditThemeVisible=e),title:"编辑主题",width:"30%"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{model:i.form_edit,"label-width":"120px",style:{"margin-top":"1px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.themeList,(t=>((0,o.wg)(),(0,o.j4)(v,{label:"主题名称:",key:t.id,required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,style:{width:"100px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(h,{onClick:l=>e.deleteTheme(t.id)},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:2},1032,["onClick"]),(0,o.Wm)(h,{type:"primary",onClick:e=>n.updateTheme(t.id,t.name)},{default:(0,o.w5)((()=>[(0,o.Uk)("更新")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}var ja={data(){return{currentPage:1,pageSize:5,dialogVisible:!1,dialogAddThemeVisible:!1,dialogEditThemeVisible:!1,searcAppQuery:"",searchQuery:"",searchResults:"",platformAccounts:["account1","account2","account3","exampleAccount","testAccount"],colorList:[{background:"#87CEFA",color:"#0000FF"},{background:"#7FFFAA",color:"#228B22"},{background:"#FDF5E6",color:"#FFA500"},{background:"#FFA07A",color:"#FF4500"},{background:"#FFB6C1",color:"#FF1493"}],themeList:[{id:1,name:"宝马"},{id:2,name:"奔驰"},{id:3,name:"奇骏"}],form_create:{},form_edit:{},currentAllapp:[],filterAllapp:[]}},computed:{...(0,ot.Se)(["allapp","app"]),totalPages(){return Math.ceil(this.filterAllapp.length/this.pageSize)},matchedAccounts(){return this.platformAccounts.filter((e=>e.includes(this.searchQuery)))},paginatedApps(){this.filterAllapp=this.filter_allapp();const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filterAllapp.slice(e,t)}},name:"AppView",methods:{editapp(e){"已发布"===e.state?alert("当前应用已发布，请在应用停用后再进行编辑/删除"):this.$router.push("/edit/"+e._id)},updateallapp(e){this.currentAllapp=this.allapp.filter((t=>t.theme.includes(e)))},filter_allapp(){return this.currentAllapp.filter((e=>e.name.includes(this.searcAppQuery)))},createTheme(){this.dialogAddThemeVisible=!1,console.log(this.form_create)},editTheme(e){e&&(this.selectedTheme=e,this.editForm.name=e.name,this.dialogEditThemeVisible=!0)},updateTheme(){this.selectedTheme&&(this.selectedTheme.name=this.editForm.name,this.dialogEditThemeVisible=!1)},handlePageChange(e){console.log(this.currentPage),this.currentPage=e},authorizeapp(){this.dialogVisible=!0,console.log(this.dialogVisible)},selectAccount(e){this.searchQuery=e,this.searchResult=e},inviteUser(){this.dialogVisible=!1,console.log(this.searchResult)},generateRandomColorStyle(){let e=Math.floor(Math.random()*this.colorList.length);return console.log(this.colorList[e].background,this.colorList[e].color),{"background-color":this.colorList[e].background,color:this.colorList[e].color}},deleteapp(e){"已发布"===e.state?alert("当前应用已发布，请在应用停用后再进行编辑/删除"):this.$confirm("确认删除该应用吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{await this.$store.dispatch("deleteApp/deleteApp",{_id:e._id}),this.$router.go(0)}catch(t){console.log("[App]: 删除失败！")}})).catch((()=>{this.$router.push("/about")}))}},components:{Management:Gl.O_g,Rank:Gl.yw1},async mounted(){await this.$store.dispatch("getallApp/getallApp").then((e=>{})).catch((()=>{console.log("[HomeView]: 获取hello失败！")})),this.currentAllapp=this.allapp}};const qa=(0,d.Z)(ja,[["render",Fa],["__scopeId","data-v-340fae19"]]);var Ba=qa;const Oa={style:{"text-align":"left","margin-left":"50px","margin-bottom":"10px"}},Ha=(0,o._)("h3",{style:{"line-height":"0px",color:"#0c89fd","text-align":"left"}},"帮助小助手",-1),Ma=(0,o._)("h3",{style:{"margin-bottom":"1px"}},"知识库选择",-1),Ia=(0,o._)("p",null,"如有调整，您可以为此应用关联一个知识库，以便大模型能够提供更加专业、精准的回答",-1),Ra=(0,o._)("h3",{style:{"line-height":"0px",color:"#0c89fd","text-align":"left"}},"帮助小助手",-1),Qa=(0,o._)("h3",{style:{"margin-bottom":"1px"}},"下一步做什么",-1),Ya=(0,o._)("p",null,"您的应用已经创建完成，快去调试你的应用吧！",-1),Za={style:{"text-align":"left"}},Na=(0,o._)("img",{alt:"",src:na,style:{float:"center"}},null,-1),Ga=(0,o._)("h2",null,"应用创建完成！",-1),Ja={style:{"text-align":"left"}},Xa=(0,o._)("div",{style:{"text-align":"left","margin-top":"15px"}},"知识库:",-1),eo={style:{"margin-top":"0px",display:"inline-block","margin-right":"10px"}},to={style:{"margin-top":"20px"}};function lo(e,t,l,a,i,n){const s=(0,o.up)("el-button"),r=(0,o.up)("el-card"),d=(0,o.up)("el-col"),p=(0,o.up)("el-input"),c=(0,o.up)("el-form-item"),m=(0,o.up)("el-option"),u=(0,o.up)("el-select"),h=(0,o.up)("el-form"),g=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Oa,[(0,o.Wm)(s,{plain:"",type:"primary",onClick:t[0]||(t[0]=t=>e.$router.push("/about"))},{default:(0,o.w5)((()=>[(0,o.Uk)(" 返回应用列表")])),_:1})]),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[i.showCard1?((0,o.wg)(),(0,o.j4)(d,{key:0,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"300px","margin-left":"50px","border-radius":"8px",display:"flex","flex-direction":"column","justify-content":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{color:"white","background-color":"#e8f1fd",height:"280px"}},{default:(0,o.w5)((()=>[Ha,(0,o.Wm)(r,{style:{"background-color":"rgb(251, 252, 252)"}},{default:(0,o.w5)((()=>[Ma,Ia])),_:1})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),i.showCard3?((0,o.wg)(),(0,o.j4)(d,{key:1,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"300px","margin-left":"50px","border-radius":"8px",display:"flex","flex-direction":"column","justify-content":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{color:"white","background-color":"#e8f1fd",height:"280px"}},{default:(0,o.w5)((()=>[Ra,(0,o.Wm)(r,{style:{"background-color":"rgb(251, 252, 252)",height:"200px"}},{default:(0,o.w5)((()=>[Qa,Ya])),_:1})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),i.showCard2?((0,o.wg)(),(0,o.j4)(d,{key:2,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"1000px","margin-left":"30px","border-radius":"8px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{model:i.form,"label-width":"120px"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{style:{"margin-top":"30px"},label:"应用名称",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:i.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.name=e),style:{width:"600px"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{style:{"margin-top":"30px"},label:"应用描述"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:i.form.details,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.details=e),style:{height:"100px",width:"600px"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{style:{"margin-top":"30px"},label:"知识库"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.knowledgebase,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.knowledgebase=e),placeholder:"选择知识库",multiple:"",style:{width:"300px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.knowledge_list,(e=>((0,o.wg)(),(0,o.j4)(m,{label:e.name,key:e._id,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(c,{style:{"margin-top":"30px"},label:"绑定到景点(id)"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:i.form.bind,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.bind=e),type:"number",style:{height:"50px",width:"100px"}},null,8,["modelValue"])])),_:1}),(0,o._)("div",Za,[(0,o.Wm)(s,{type:"primary",plain:"",onClick:t[5]||(t[5]=t=>e.$router.push("/about")),style:{"margin-left":"120px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:t[6]||(t[6]=e=>n.submitForm())},{default:(0,o.w5)((()=>[(0,o.Uk)("保存")])),_:1})])])),_:1},8,["model"])])),_:1})])),_:1})):(0,o.kq)("",!0),i.showCard4?((0,o.wg)(),(0,o.j4)(d,{key:3,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"1000px","margin-left":"30px","border-radius":"8px"}},{default:(0,o.w5)((()=>[Na,Ga,(0,o.Wm)(r,{style:{width:"800px",height:"175px","background-color":"#e8f1fd","margin-left":"84px"}},{default:(0,o.w5)((()=>[(0,o._)("div",Ja,"应用名称："+(0,w.zw)(i.form.name),1),(0,o._)("div",null,[Xa,(0,o.Wm)(r,{style:{height:"52px","margin-top":"10px","text-align":"left"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.selectKnowledgebase,(e=>((0,o.wg)(),(0,o.iD)("p",eo,(0,w.zw)(e),1)))),256))])),_:1})])])),_:1}),(0,o._)("div",to,[(0,o.Wm)(s,{type:"primary",plain:"",onClick:t[7]||(t[7]=t=>e.$router.push("/about")),style:{"margin-left":"10px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("应用列表->")])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:t[8]||(t[8]=t=>e.$router.push("/detail/"+e.create.data._id))},{default:(0,o.w5)((()=>[(0,o.Uk)("去调试->")])),_:1})])])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})],64)}var ao={data(){return{form:{state:"未发布",prompt:"",num:1,bind:0},showCard1:!0,showCard2:!0,showCard3:!1,showCard4:!1,app_id:""}},computed:{...(0,ot.Se)(["knowledge_list","allapp","create"]),selectKnowledgebase(){return this.form.knowledgebase&&0!==this.form.knowledgebase.length?this.form.knowledgebase.map((e=>{const t=this.knowledge_list.find((t=>t._id===e));return t?t.name:"未找到"})):["无知识库"]}},methods:{submitForm(){console.log(this.form),console.log(this.form);try{this.$store.dispatch("createApp/createApp",this.form).then((e=>{this.showCard1=!1,this.showCard2=!1,this.showCard3=!0,this.showCard4=!0,this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")}))})).catch((()=>{console.log("[HomeView]: 获取hello失败！")})),console.log(this.create.data)}catch(e){console.error("提交失败:",e)}}},mounted(){this.$store.dispatch("get_knowledgebase/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[HomeView]: 获取hello失败！")}))}};const oo=(0,d.Z)(ao,[["render",lo]]);var io=oo;const no={style:{"text-align":"left","margin-left":"50px","margin-bottom":"10px"}},so=(0,o._)("h3",{style:{"line-height":"0px",color:"#0c89fd","text-align":"left"}},"帮助小助手",-1),ro=(0,o._)("h3",{style:{"margin-bottom":"1px"}},"知识库选择",-1),po=(0,o._)("p",null,"如有调整，您可以为此应用关联一个知识库，以便大模型能够提供更加专业、精准的回答",-1),co=(0,o._)("h3",{style:{"line-height":"0px",color:"#0c89fd","text-align":"left"}},"帮助小助手",-1),mo=(0,o._)("h3",{style:{"margin-bottom":"1px"}},"下一步做什么",-1),uo=(0,o._)("p",null,"您的应用已经创建完成，快去调试你的应用吧！",-1),ho={style:{"text-align":"left"}},go=(0,o._)("img",{alt:"",src:na,style:{float:"center"}},null,-1),fo=(0,o._)("h2",null,"应用创建完成！",-1),wo={style:{"text-align":"left"}},_o=(0,o._)("div",{style:{"text-align":"left","margin-top":"15px"}},"知识库:",-1),xo={style:{"margin-top":"0px",display:"inline-block","margin-right":"10px"}},bo={style:{"margin-top":"20px"}};function yo(e,t,l,a,i,n){const s=(0,o.up)("el-button"),r=(0,o.up)("el-card"),d=(0,o.up)("el-col"),p=(0,o.up)("el-input"),c=(0,o.up)("el-form-item"),m=(0,o.up)("el-option"),u=(0,o.up)("el-select"),h=(0,o.up)("el-form"),g=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",no,[(0,o.Wm)(s,{plain:"",type:"primary",onClick:t[0]||(t[0]=t=>e.$router.push("/about"))},{default:(0,o.w5)((()=>[(0,o.Uk)(" 返回应用列表")])),_:1})]),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[i.showCard1?((0,o.wg)(),(0,o.j4)(d,{key:0,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"300px","margin-left":"50px","border-radius":"8px",display:"flex","flex-direction":"column","justify-content":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{color:"white","background-color":"#e8f1fd",height:"280px"}},{default:(0,o.w5)((()=>[so,(0,o.Wm)(r,{style:{"background-color":"rgb(251, 252, 252)"}},{default:(0,o.w5)((()=>[ro,po])),_:1})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),i.showCard3?((0,o.wg)(),(0,o.j4)(d,{key:1,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"300px","margin-left":"50px","border-radius":"8px",display:"flex","flex-direction":"column","justify-content":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{color:"white","background-color":"#e8f1fd",height:"280px"}},{default:(0,o.w5)((()=>[co,(0,o.Wm)(r,{style:{"background-color":"rgb(251, 252, 252)",height:"200px"}},{default:(0,o.w5)((()=>[mo,uo])),_:1})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),i.showCard2?((0,o.wg)(),(0,o.j4)(d,{key:2,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"1000px","margin-left":"30px","border-radius":"8px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{model:i.form,"label-width":"120px"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{style:{"margin-top":"30px"},label:"应用名称",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:i.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.name=e),style:{width:"600px"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{style:{"margin-top":"30px"},label:"应用描述"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:i.form.details,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.details=e),style:{height:"100px",width:"600px"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{style:{"margin-top":"30px"},label:"知识库"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.knowledgebase,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.knowledgebase=e),placeholder:"选择知识库",multiple:"",style:{width:"300px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.knowledge_list,(e=>((0,o.wg)(),(0,o.j4)(m,{label:e.name,key:e._id,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o._)("div",ho,[(0,o.Wm)(s,{type:"primary",plain:"",onClick:t[4]||(t[4]=t=>e.$router.push("/about")),style:{"margin-left":"120px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:t[5]||(t[5]=e=>n.submitForm())},{default:(0,o.w5)((()=>[(0,o.Uk)("保存")])),_:1})])])),_:1},8,["model"])])),_:1})])),_:1})):(0,o.kq)("",!0),i.showCard4?((0,o.wg)(),(0,o.j4)(d,{key:3,span:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{height:"600px",width:"1000px","margin-left":"30px","border-radius":"8px"}},{default:(0,o.w5)((()=>[go,fo,(0,o.Wm)(r,{style:{width:"800px",height:"175px","background-color":"#e8f1fd","margin-left":"84px"}},{default:(0,o.w5)((()=>[(0,o._)("div",wo,"应用名称："+(0,w.zw)(i.form.name),1),(0,o._)("div",null,[_o,(0,o.Wm)(r,{style:{height:"52px","margin-top":"10px","text-align":"left"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.selectKnowledgebase,(e=>((0,o.wg)(),(0,o.iD)("p",xo,(0,w.zw)(e),1)))),256))])),_:1})])])),_:1}),(0,o._)("div",bo,[(0,o.Wm)(s,{type:"primary",plain:"",onClick:t[6]||(t[6]=t=>e.$router.push("/about")),style:{"margin-left":"10px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("应用列表->")])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:t[7]||(t[7]=t=>e.$router.push("/detail/"+e.app._id))},{default:(0,o.w5)((()=>[(0,o.Uk)("去调试->")])),_:1})])])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})],64)}var ko={data(){return{form:{_id:this.$route.params._id,name:"",details:"",knowledgebase:[]},showCard1:!0,showCard2:!0,showCard3:!1,showCard4:!1}},computed:{...(0,ot.Se)(["knowledge_list","app"]),selectKnowledgebase(){return this.form.knowledgebase&&0!==this.form.knowledgebase.length?this.form.knowledgebase.map((e=>{const t=this.knowledge_list.find((t=>t._id===e));return t?t.name:"未找到"})):["无知识库"]}},methods:{async submitForm(){if(console.log(this.form),""!==this.form.name)try{this.$store.dispatch("editApp/editApp",this.form).then((e=>{this.showCard1=!1,this.showCard2=!1,this.showCard3=!0,this.showCard4=!0,this.$store.dispatch("knowledge/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[KnowledgeBase]: 获取知识库失败！")}))})).catch((()=>{console.log("[HomeView]: 获取hello失败！")}))}catch(e){console.error("提交失败:",e)}else this.$message.error("请填写应用名称")}},async mounted(){const e=this.$route.params._id;this.$store.dispatch("get_knowledgebase/getKnowledgeList").then((e=>{})).catch((()=>{console.log("[HomeView]: 获取hello失败！")})),await this.$store.dispatch("getApp/getApp",{_id:e}).then((e=>{})).catch((()=>{console.log("[HomeView]: 获取hello失败！")})),this.form.name=this.app.name,this.form.details=this.app.details,this.form.knowledgebase=this.app.knowledgebase}};const vo=(0,d.Z)(ko,[["render",yo]]);var Wo=vo;function Ao(e,t,l,a,i,n){return(0,o.wg)(),(0,o.iD)("h1",null,"使用应用")}var Co={data(){return{test:""}},computed:{...(0,ot.Se)(["app"])},name:"AppUse",components:{},async mounted(){const e=this.$route.params._id;await this.$store.dispatch("getApp/getApp",{_id:e}).then((e=>{})).catch((()=>{console.log("[HomeView]: 获取hello失败！")})),console.log(this.app)}};const Vo=(0,d.Z)(Co,[["render",Ao]]);var Po=Vo;const Uo={style:{"text-align":"left","margin-left":"50px","margin-bottom":"10px"}},So={style:{height:"25px"}},Do={style:{"margin-bottom":"3px"}},To={style:{display:"inline-block","margin-top":"15px"}},zo=(0,o._)("p",{style:{display:"inline-block","margin-left":"10px","margin-right":"10px"}},"|",-1),Lo={style:{display:"inline-block"}},Ko={key:0},$o={style:{display:"inline-block","margin-right":"50px","margin-bottom":"1px"}},Eo=(0,o._)("p",{style:{display:"inline-block","margin-right":"50px","margin-bottom":"1px"}},"创建人：张三",-1),Fo=(0,o._)("p",{style:{display:"inline-block","margin-right":"10px","margin-bottom":"1px"}},"应用状态：",-1),jo={style:{display:"inline-block","margin-left":"50px","margin-bottom":"1px"}},qo={style:{display:"inline-block","margin-right":"85px","margin-top":"6px"}},Bo={style:{display:"inline-block","margin-right":"60px","margin-top":"6px"}},Oo={key:0},Ho={style:{display:"inline-block","margin-right":"85px","margin-top":"6px"}},Mo={style:{display:"inline-block","margin-right":"60px","margin-top":"6px"}},Io={href:"{{ app.link }}",target:"_blank"},Ro={style:{display:"inline-block","margin-right":"60px","margin-top":"6px"}},Qo={style:{"margin-right":"85px","margin-top":"18px",display:"inline-block"}},Yo={key:1,style:{display:"flex"}},Zo={style:{height:"30px"}},No=(0,o._)("g",null,[(0,o._)("g",null,[(0,o._)("g",null,[(0,o._)("g",null,[(0,o._)("path",{d:"M256,76c48.1,0,93.3,18.7,127.3,52.7S436,207.9,436,256s-18.7,93.3-52.7,127.3S304.1,436,256,436\n                            c-48.1,0-93.3-18.7-127.3-52.7C94.7,349.3,76,304.1,76,256s18.7-93.3,52.7-127.3C162.7,94.7,207.9,76,256,76 M256,48\n                            C141.1,48,48,141.1,48,256s93.1,208,208,208c114.9,0,208-93.1,208-208S370.9,48,256,48L256,48z"})])])]),(0,o._)("g",null,[(0,o._)("path",{d:"M256.7,160c37.5,0,63.3,20.8,63.3,50.7c0,19.8-9.6,33.5-28.1,44.4c-17.4,10.1-23.3,17.5-23.3,30.3v7.9h-34.7l-0.3-8.6\n                    c-1.7-20.6,5.5-33.4,23.6-44c16.9-10.1,24-16.5,24-28.9s-12-21.5-26.9-21.5c-15.1,0-26,9.8-26.8,24.6H192\n                    C192.7,182.7,216.5,160,256.7,160z M230.4,331.4c0-11.5,9.6-20.6,21.4-20.6c11.9,0,21.5,9,21.5,20.6s-9.6,20.6-21.5,20.6\n                    C239.9,352,230.4,343,230.4,331.4z"})])],-1),Go=[No],Jo={style:{"margin-top":"10px","margin-left":"118px"}},Xo=["src"],ei={style:{"margin-top":"20px","margin-left":"108px"}},ti=(0,o._)("img",{alt:"",src:na,style:{float:"center"}},null,-1),li=(0,o._)("h2",null,"应用发布完成！",-1),ai={style:{"margin-top":"20px"}};function oi(e,t,l,a,i,n){const s=(0,o.up)("el-button"),r=(0,o.up)("el-text"),d=(0,o.up)("el-tag"),p=(0,o.up)("el-card"),c=(0,o.up)("el-switch"),m=(0,o.up)("el-tooltip"),u=(0,o.up)("el-input"),h=(0,o.up)("el-form-item"),g=(0,o.up)("el-form"),f=(0,o.up)("el-drawer"),_=(0,o.up)("el-option"),x=(0,o.up)("el-select"),b=(0,o.up)("n-result"),y=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Uo,[(0,o.Wm)(s,{plain:"",type:"primary",onClick:t[0]||(t[0]=e=>this.$router.push("/about"))},{default:(0,o.w5)((()=>[(0,o.Uk)(" 返回应用列表")])),_:1})]),(0,o.Wm)(p,{style:(0,w.j5)([{margin:"20px 50px"},{height:"173px","text-align":"left"}])},{default:(0,o.w5)((()=>[(0,o._)("div",So,[(0,o.Wm)(r,{tag:"b"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(e.app.name),1)])),_:1}),(0,o.Wm)(d,{style:{"margin-left":"5px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,w.zw)(e.app.state),1)])),_:1}),"已发布"!=e.app.state?((0,o.wg)(),(0,o.j4)(s,{key:0,type:"primary",onClick:n.showpublic,style:{"margin-left":"1100px"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 发布 ")])),_:1},8,["onClick"])):(0,o.kq)("",!0)]),(0,o._)("p",Do,(0,w.zw)(e.app.details),1),(0,o._)("div",null,[(0,o._)("p",To,"调用次数："+(0,w.zw)(e.app.num),1),zo,(0,o._)("p",Lo,"创建时间："+(0,w.zw)(e.app.time),1)]),(0,o._)("div",null,[(0,o.Wm)(s,{text:"",onClick:t[1]||(t[1]=e=>{i.flag1=!0,i.flag2=!1})},{default:(0,o.w5)((()=>[(0,o.Uk)("应用详情")])),_:1}),(0,o.Wm)(s,{text:"",onClick:n.showprompt},{default:(0,o.w5)((()=>[(0,o.Uk)("提示词编排")])),_:1},8,["onClick"])])])),_:1}),i.flag1?((0,o.wg)(),(0,o.iD)("div",Ko,[(0,o.Wm)(p,{style:(0,w.j5)([{margin:"20px 50px"},{height:"130px","text-align":"left"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{tag:"b"},{default:(0,o.w5)((()=>[(0,o.Uk)("应用信息")])),_:1}),(0,o._)("div",null,[(0,o._)("p",$o,"应用名称："+(0,w.zw)(e.app.name),1),Eo,Fo,"已发布"===e.app.state?((0,o.wg)(),(0,o.j4)(c,{key:0,modelValue:i.isSwitchOn,"onUpdate:modelValue":t[2]||(t[2]=e=>i.isSwitchOn=e),disabled:!i.isSwitchOn,onChange:n.handleSwitchChange,size:"large","inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":"已发布"},null,8,["modelValue","disabled","onChange"])):(0,o.kq)("",!0),"未发布"===e.app.state?((0,o.wg)(),(0,o.j4)(d,{key:1,type:"info",effect:"dark",round:"",style:{"margin-bottom":"1px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("未发布")])),_:1})):(0,o.kq)("",!0),"调试中"===e.app.state?((0,o.wg)(),(0,o.j4)(d,{key:2,type:"info",effect:"dark",round:"",style:{"margin-bottom":"1px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("调试中")])),_:1})):(0,o.kq)("",!0),(0,o._)("p",jo,"创建时间："+(0,w.zw)(e.app.time),1)]),(0,o._)("div",null,[(0,o._)("p",qo,"应用调用次数："+(0,w.zw)(e.app.num),1),(0,o._)("p",Bo,"提示词："+(0,w.zw)(e.app.prompt),1)])])),_:1}),"已发布"===e.app.state?((0,o.wg)(),(0,o.iD)("div",Oo,[(0,o.Wm)(p,{style:(0,w.j5)([{margin:"20px 50px"},{height:"100px","text-align":"left"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{tag:"b"},{default:(0,o.w5)((()=>[(0,o.Uk)("发布信息")])),_:1}),(0,o._)("div",null,[(0,o._)("p",Ho,"发布大模型： "+(0,w.zw)(i.model_list.find((t=>t._id===e.app.model)).name),1),(0,o._)("p",Mo,[(0,o.Uk)(" 应用发布URL： "),(0,o._)("a",Io,(0,w.zw)(e.app.link),1)]),(0,o._)("p",Ro,"提示词："+(0,w.zw)(e.app.prompt),1)])])),_:1})])):(0,o.kq)("",!0),(0,o.Wm)(p,{style:(0,w.j5)([{margin:"20px 50px"},{height:"120px","text-align":"left"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{tag:"b"},{default:(0,o.w5)((()=>[(0,o.Uk)("知识库信息")])),_:1}),(0,o._)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.selectKnowledgebase,(e=>((0,o.wg)(),(0,o.iD)("p",Qo,(0,w.zw)(e),1)))),256))])])),_:1})])):(0,o.kq)("",!0),i.flag2?((0,o.wg)(),(0,o.iD)("div",Yo,[(0,o.Wm)(p,{style:{height:"410px","text-align":"left",flex:"1","margin-left":"50px","margin-right":"50px"}},{default:(0,o.w5)((()=>[(0,o._)("div",Zo,[(0,o.Wm)(r,{tag:"b"},{default:(0,o.w5)((()=>[(0,o.Uk)("对话前置提示词")])),_:1}),(0,o.Wm)(m,{class:"box-item",effect:"light",content:"（Prompt）是一种用于指导人工智能模型生成输出的小段文本，您可以使用提示词来精确地描述希望模型执行的任务，可以包含一些回答示例，或者提供有关输入数据的一些背景信息、输出要求等。",placement:"top-start"},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)("svg",{onMouseover:t[3]||(t[3]=e=>i.showPopup=!0),onMouseleave:t[4]||(t[4]=e=>i.showPopup=!1),version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"20px",y:"20px",width:"20",height:"20",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512","xml:space":"preserve"},Go,32))])),_:1}),"未发布"===e.app.state?((0,o.wg)(),(0,o.j4)(s,{key:0,type:"primary",style:{"margin-left":"1050px"},onClick:n.testprompt},{default:(0,o.w5)((()=>[(0,o.Uk)("提示词测试")])),_:1},8,["onClick"])):(0,o.kq)("",!0),"调试中"===e.app.state?((0,o.wg)(),(0,o.j4)(s,{key:1,type:"primary",style:{"margin-left":"1000px"},onClick:n.stoptestprompt},{default:(0,o.w5)((()=>[(0,o.Uk)("关闭测试")])),_:1},8,["onClick"])):(0,o.kq)("",!0),"调试中"===e.app.state?((0,o.wg)(),(0,o.j4)(s,{key:2,type:"primary",style:{"margin-left":"30px"},onClick:t[5]||(t[5]=e=>this.drawer=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("继续测试")])),_:1})):(0,o.kq)("",!0)]),(0,o.Wm)(g,{model:i.form2,"label-width":"120px",style:{"margin-top":"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"提示词输入",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form2.prompt,"onUpdate:modelValue":t[6]||(t[6]=e=>i.form2.prompt=e),style:{height:"290px",width:"600px"}},null,8,["modelValue"])])),_:1}),(0,o._)("div",Jo,[(0,o.Wm)(s,{type:"primary",onClick:n.submitprompt},{default:(0,o.w5)((()=>[(0,o.Uk)("确定")])),_:1},8,["onClick"])])])),_:1},8,["model"]),(0,o.Wm)(f,{modelValue:i.drawer,"onUpdate:modelValue":t[7]||(t[7]=e=>i.drawer=e),title:"提示词测试",direction:"btt",size:"690"},{default:(0,o.w5)((()=>[(0,o._)("iframe",{src:e.app.link,frameborder:"0",style:{width:"100%",height:"700px"}},null,8,Xo)])),_:1},8,["modelValue"])])),_:1})])):(0,o.kq)("",!0),(0,o.Wm)(y,{modelValue:i.flag3,"onUpdate:modelValue":t[10]||(t[10]=e=>i.flag3=e),title:"发布应用"},{default:(0,o.w5)((()=>[i.flag3_1?((0,o.wg)(),(0,o.j4)(g,{key:0,model:i.form,"label-width":"120px"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"大模型选择",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:i.form.model,"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.model=e),placeholder:"选择大模型",style:{width:"300px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.model_list,(e=>((0,o.wg)(),(0,o.j4)(_,{label:e.name,key:e._id,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o._)("div",ei,[(0,o.Wm)(s,{type:"primary",plain:"",onClick:t[9]||(t[9]=e=>i.flag3=0),style:{"margin-left":"10px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:n.submitapp},{default:(0,o.w5)((()=>[(0,o.Uk)("确定")])),_:1},8,["onClick"])])])),_:1},8,["model"])):(0,o.kq)("",!0),i.flag3_2?((0,o.wg)(),(0,o.j4)(b,{key:1,status:"info",title:"发布中",description:"应用发布中，请稍候"})):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),(0,o.Wm)(y,{modelValue:i.flag4,"onUpdate:modelValue":t[12]||(t[12]=e=>i.flag4=e)},{default:(0,o.w5)((()=>[ti,li,(0,o._)("div",ai,[(0,o.Wm)(s,{type:"primary",plain:"",onClick:t[11]||(t[11]=e=>i.flag4=!1),style:{"margin-left":"10px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("返回->")])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:n.alertapp},{default:(0,o.w5)((()=>[(0,o.Uk)("去试用->")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])],64)}var ii=l(6666),ni={data(){return{model_list:[{_id:"654dd9c4ea13fc974c0504c9",name:"openai_gpt_3.5_turbo"}],showPopup:"（Prompt）是一种用于指导人工智能模型生成输出的小段文本，您可以使用提示词来精确地描述希望模型执行的任务，可以包含一些回答示例，或者提供有关输入数据的一些背景信息、输出要求等。",flag1:!0,flag2:!1,flag3:!1,flag3_1:!1,flag3_2:!1,flag4:!1,drawer:!1,form:{_id:this.$route.params._id,model:""},form2:{_id:this.$route.params._id,prompt:""},isSwitchOn:!0}},computed:{...(0,ot.Se)(["knowledge_list","app","submit","openapp","testapp","prompt"]),selectKnowledgebase(){return this.app.knowledgebase&&0!==this.app.knowledgebase.length?this.app.knowledgebase.map((e=>{const t=this.knowledge_list.find((t=>t._id===e));return t?t.name:"未找到"})):["无知识库"]}},async mounted(){const e=this.$route.params._id;try{this.$store.dispatch("get_knowledgebase/getKnowledgeList")}catch(t){console.log("[HomeView]: 获取知识库失败！")}try{await this.$store.dispatch("getApp/getApp",{_id:e}),this.form.model=this.app.model,this.form2.prompt=this.app.prompt}catch(t){console.log("[HomeView]: 获取应用失败！")}},methods:{async alertapp(){this.flag4=!1,window.open(this.app.link,"_blank")},showpublic(){"调试中"===this.app.state?alert("请先关闭测试再进行发布"):(this.flag3=!0,this.flag3_1=!0)},showprompt(){"已发布"===this.app.state?alert("已发布的应用不支持提示词编排功能"):(this.flag1=!1,this.flag2=!0)},stoptestprompt(){const e=this.$route.params._id;this.$store.dispatch("stoptestApp/stoptestApp",e).then((t=>{this.$store.dispatch("getApp/getApp",{_id:e})})).catch((()=>{console.log("[HomeView]: 获取hello失败！")}))},testprompt(){(0,ii.bM)({title:"环境创建中",message:"测试环境创建中，请稍候",type:"success"});const e=this.$route.params._id;this.$store.dispatch("testApp/testApp",e).then((t=>{this.drawer=!0,this.$store.dispatch("getApp/getApp",{_id:e})})).catch((()=>{console.log("[HomeView]: 获取hello失败！")}))},async submitapp(){this.flag3_1=!1,this.flag3_2=!0;const e=this.$route.params._id;console.log(this.form),await this.$store.dispatch("submitPrompt/submitPrompt",this.form).then((e=>{})).catch((()=>{console.log("[HomeView]: 获取hello失败！")})),console.log(this.form2),await this.$store.dispatch("openApp/openApp",this.form2).then((e=>{console.log("发布成功"),this.flag3=!1,this.flag3_2=!1,this.flag4=!0})).catch((()=>{console.log("[HomeView]: 获取hello失败！")})),this.$store.dispatch("getApp/getApp",{_id:e})},submitprompt(){const e=this.$route.params._id;this.$store.dispatch("submitPrompt/submitPrompt",this.form2).then((t=>{(0,ii.bM)({title:"已提交",message:"提示词已提交",type:"success"}),this.$store.dispatch("getApp/getApp",{_id:e})})).catch((()=>{console.log("[HomeView]: 获取hello失败！")}))},handleSwitchChange(e){e||this.$confirm("确认要关闭吗？","关闭确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$store.dispatch("stopApp/stopApp",this.$route.params._id).then((e=>{this.$router.go(0)})).catch((()=>{console.log("[HomeView]: 获取hello失败！")}))})).catch((()=>{this.isSwitchOn=!0}))}}};const si=(0,d.Z)(ni,[["render",oi]]);var ri=si;const di=[{path:"/",name:"home",component:ia},{path:"/about",name:"about",component:Ba},{path:"/create",name:"create",component:io},{path:"/edit/:_id",name:"edit",component:Wo},{path:"/use/:_id",name:"use",component:Po},{path:"/detail/:_id",name:"detail",component:ri}],pi=(0,h.p7)({history:(0,h.r5)(),routes:di});var ci=pi,mi=l(9509);l(2834);(0,a.ri)(m).use(Bl).use(ci).use(u.Z).use(mi.Z).mount("#app")}},t={};function l(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,l),i.exports}l.m=e,function(){var e=[];l.O=function(t,a,o,i){if(!a){var n=1/0;for(p=0;p<e.length;p++){a=e[p][0],o=e[p][1],i=e[p][2];for(var s=!0,r=0;r<a.length;r++)(!1&i||n>=i)&&Object.keys(l.O).every((function(e){return l.O[e](a[r])}))?a.splice(r--,1):(s=!1,i<n&&(n=i));if(s){e.splice(p--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[a,o,i]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p=""}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,i,n=a[0],s=a[1],r=a[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(o in s)l.o(s,o)&&(l.m[o]=s[o]);if(r)var p=r(l)}for(t&&t(a);d<n.length;d++)i=n[d],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(p)},a=self["webpackChunkaimc_llm"]=self["webpackChunkaimc_llm"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[998],(function(){return l(3739)}));a=l.O(a)})();
//# sourceMappingURL=app.e692f511.js.map